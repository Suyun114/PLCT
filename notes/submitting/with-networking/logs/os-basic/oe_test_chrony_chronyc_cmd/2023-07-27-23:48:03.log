+ source /root/mugen/libs/locallibs/common_lib.sh
++ python3 --version
++ '[' 0 -eq 0 ']'
++ source /root/mugen/libs/locallibs/common_lib_python.sh
+ main
++ type -t post_test
+ '[' -n function ']'
+ trap post_test EXIT INT HUP TERM
+ rpm -qa
+ grep expect
++ type -t config_params
+ '[' -n '' ']'
++ type -t pre_test
+ '[' -n function ']'
+ pre_test
+ LOG_INFO 'Start to prepare the test environment.'
+ message='Start to prepare the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to prepare the test environment.'
Thu Jul 27 23:48:09 2023 - INFO  - Start to prepare the test environment.
+ DNF_INSTALL chrony
+ pkgs=chrony
+ node=1
+ '[' -z '' ']'
+ tmpfile=
++ python3 /root/mugen/libs/locallibs/rpm_manage.py install --pkgs chrony --node 1 --tempfile ''
+ tmpfile2=/tmp/tmpdod6e7ai
+ '[' -z '' ']'
+ tmpfile=/tmp/tmpdod6e7ai
+ systemctl start chronyd
+ LOG_INFO 'End to prepare the test environment.'
+ message='End to prepare the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End to prepare the test environment.'
Thu Jul 27 23:49:28 2023 - INFO  - End to prepare the test environment.
++ type -t run_test
+ '[' -n function ']'
+ run_test
+ LOG_INFO 'Start to run test.'
+ message='Start to run test.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to run test.'
Thu Jul 27 23:49:29 2023 - INFO  - Start to run test.
+ systemctl status chronyd
+ grep running
     Active: active (running) since Thu 2023-07-27 23:49:27 CST; 3s ago
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ expect -d
expect version 5.45.4
argv[0] = expect  argv[1] = -d  
set argc 0
set argv0 "expect"
set argv ""
executing commands from command file
spawn chronyc
parent: waiting for sync byte
parent: telling child to go ahead
parent: now unsynchronized from child
spawn: returns {35190}

expect: does "" (spawn_id exp3) match glob pattern "chronyc>"? no
chrony version 4.3
Copyright (C) 1997-2003, 2007, 2009-2022 Richard P. Curnow and others
chrony comes with ABSOLUTELY NO WARRANTY.  This is free software, and
you are welcome to redistribute it under certain conditions.  See the
GNU General Public License version 2 for details.


expect: does "chrony version 4.3\r\nCopyright (C) 1997-2003, 2007, 2009-2022 Richard P. Curnow and others\r\nchrony comes with ABSOLUTELY NO WARRANTY.  This is free software, and\r\nyou are welcome to redistribute it under certain conditions.  See the\r\nGNU General Public License version 2 for details.\r\n\r\n" (spawn_id exp3) match glob pattern "chronyc>"? no
No entry for terminal type "unknown";
using dumb terminal settings.

expect: does "chrony version 4.3\r\nCopyright (C) 1997-2003, 2007, 2009-2022 Richard P. Curnow and others\r\nchrony comes with ABSOLUTELY NO WARRANTY.  This is free software, and\r\nyou are welcome to redistribute it under certain conditions.  See the\r\nGNU General Public License version 2 for details.\r\n\r\nNo entry for terminal type "unknown";\r\nusing dumb terminal settings.\r\n" (spawn_id exp3) match glob pattern "chronyc>"? no
chronyc> 
expect: does "chrony version 4.3\r\nCopyright (C) 1997-2003, 2007, 2009-2022 Richard P. Curnow and others\r\nchrony comes with ABSOLUTELY NO WARRANTY.  This is free software, and\r\nyou are welcome to redistribute it under certain conditions.  See the\r\nGNU General Public License version 2 for details.\r\n\r\nNo entry for terminal type "unknown";\r\nusing dumb terminal settings.\r\nchronyc> " (spawn_id exp3) match glob pattern "chronyc>"? yes
expect: set expect_out(0,string) "chronyc>"
expect: set expect_out(spawn_id) "exp3"
expect: set expect_out(buffer) "chrony version 4.3\r\nCopyright (C) 1997-2003, 2007, 2009-2022 Richard P. Curnow and others\r\nchrony comes with ABSOLUTELY NO WARRANTY.  This is free software, and\r\nyou are welcome to redistribute it under certain conditions.  See the\r\nGNU General Public License version 2 for details.\r\n\r\nNo entry for terminal type "unknown";\r\nusing dumb terminal settings.\r\nchronyc>"
send: sending "help\r" to { exp3 }

expect: does " " (spawn_id exp3) match glob pattern "chronyc>"? no
help
System clock:               
tracking                    Display system time information
makestep                    Correct clock by stepping immediately
makestep <threshold> <updates>
                            Configure automatic clock stepping
maxupdateskew <skew>        Modify maximum valid skew to update frequency
waitsync [<max-tries> [<max-correction> [<max-skew> [<interval>]]]]
                            Wait until synchronised in specified limits
                            
Time sources:               
sources [-a] [-v]           Display information about current sources
sourcestats [-a] [-v]       Display statistics about collected measurements
selectdata [-a] [-v]        Display information about source selection
reselect                    Force reselecting synchronisation source
reselectdist <dist>         Modify reselection distance
                            
NTP sources:                
activity                    Check how many NTP sources are online/offline
authdata [-a] [-v]          Display information about authentication
ntpdata [<address>]         Display information about last valid measurement
add server <name> [options] Add new NTP server
add pool <name> [options]   Add new pool of NTP servers
add peer <name> [options]   Add new NTP peer
delete <address>            Remove server or peer
burst <n-good>/<n-max> [[<mask>/]<address>]
                            Start rapid set of measurements
maxdelay <address> <delay>  Modify maximum valid sample delay
maxdelayratio <address> <ratio>
                            Modify maximum valid delay/minimum ratio
maxdelaydevratio <address> <ratio>
                            Modify maximum valid delay/deviation ratio
minpoll <address> <poll>    Modify minimum polling interval
maxpoll <address> <poll>    Modify maximum polling interval
minstratum <address> <stratum>
                            Modify minimum stratum
offline [[<mask>/]<address>]
                            Set sources in subnet to offline status
online [[<mask>/]<address>] Set sources in subnet to online status
onoffline                   Set all sources to online or offline status
                            according to network configuration
polltarget <address> <target>
                            Modify poll target

expect: does " help\r\nSystem clock:               \r\ntracking                    Display system time information\r\nmakestep                    Correct clock by stepping immediately\r\nmakestep <threshold> <updates>\r\n                            Configure automatic clock stepping\r\nmaxupdateskew <skew>        Modify maximum valid skew to update frequency\r\nwaitsync [<max-tries> [<max-correction> [<max-skew> [<interval>]]]]\r\n                            Wait until synchronised in specified limits\r\n                            \r\nTime sources:               \r\nsources [-a] [-v]           Display information about current sources\r\nsourcestats [-a] [-v]       Display statistics about collected measurements\r\nselectdata [-a] [-v]        Display information about source selection\r\nreselect                    Force reselecting synchronisation source\r\nreselectdist <dist>         Modify reselection distance\r\n                            \r\nNTP sources:                \r\nactivity                    Check how many NTP sources are online/offline\r\nauthdata [-a] [-v]          Display information about authentication\r\nntpdata [<address>]         Display information about last valid measurement\r\nadd server <name> [options] Add new NTP server\r\nadd pool <name> [options]   Add new pool of NTP servers\r\nadd peer <name> [options]   Add new NTP peer\r\ndelete <address>            Remove server or peer\r\nburst <n-good>/<n-max> [[<mask>/]<address>]\r\n                            Start rapid set of measurements\r\nmaxdelay <address> <delay>  Modify maximum valid sample delay\r\nmaxdelayratio <address> <ratio>\r\n                            Modify maximum valid delay/minimum ratio\r\nmaxdelaydevratio <address> <ratio>\r\n                            Modify maximum valid delay/deviation ratio\r\nminpoll <address> <poll>    Modify minimum polling interval\r\nmaxpoll <address> <poll>    Modify maximum polling interval\r\nminstratum <address> <stratum>\r\n                            Modify minimum stratum\r\noffline [[<mask>/]<address>]\r\n                            Set sources in subnet to offline status\r\nonline [[<mask>/]<address>] Set sources in subnet to online status\r\nonoffline                   Set all sources to online or offline status\r\n                            according to network configuration\r\npolltarget <address> <target>\r\n                            Modify poll target\r\n" (spawn_id exp3) match glob pattern "chronyc>"? no
refresh                     Refresh IP addresses
reload sources              Re-read *.sources files
sourcename <address>        Display original name
                            
Manual time input:          
manual off|on|reset         Disable/enable/reset settime command
manual list                 Show previous settime entries
manual delete <index>       Delete previous settime entry
settime <time>              Set daemon time
                            (e.g. Sep 25, 2015 16:30:05 or 16:30:05)
                            
NTP access:                 
accheck <address>           Check whether address is allowed
clients [-p <packets>] [-k] [-r]
                            Report on clients that accessed the server
serverstats                 Display statistics of the server
allow [<subnet>]            Allow access to subnet as a default
allow all [<subnet>]        Allow access to subnet and all children
deny [<subnet>]             Deny access to subnet as a default
deny all [<subnet>]         Deny access to subnet and all children
local [options]             Serve time even when not synchronised
local off                   Don't serve time when not synchronised
smoothtime reset|activate   Reset/activate time smoothing
smoothing                   Display current time smoothing state
                            
Monitoring access:          
cmdaccheck <address>        Check whether address is allowed
cmdallow [<subnet>]         Allow access to subnet as a default
cmdallow all [<subnet>]     Allow access to subnet and all children
cmddeny [<subnet>]          Deny access to subnet as a default
cmddeny all [<subnet>]      Deny access to subnet and all children
                            
Real-time clock:            
rtcdata                     Print current RTC performance parameters
trimrtc                     Correct RTC relative to system clock
writertc                    Save RTC performance parameters to file
                            
Other daemon commands:      
cyclelogs                   Close and re-open log files
dump                        Dump measurements and NTS keys/cookies
rekey                       Re-read keys
reset sources               Drop all measurements
shutdown                    Stop daemon
                            
Client commands:            
dns -n|+n                   Disable/enable resolving IP addresses to hostnames

expect: does " help\r\nSystem clock:               \r\ntracking                    Display system time information\r\nmakestep                    Correct clock by stepping immediately\r\nmakestep <threshold> <updates>\r\n                            Configure automatic clock stepping\r\nmaxupdateskew <skew>        Modify maximum valid skew to update frequency\r\nwaitsync [<max-tries> [<max-correction> [<max-skew> [<interval>]]]]\r\n                            Wait until synchronised in specified limits\r\n                            \r\nTime sources:               \r\nsources [-a] [-v]           Display information about current sources\r\nsourcestats [-a] [-v]       Display statistics about collected measurements\r\nselectdata [-a] [-v]        Display information about source selection\r\nreselect                    Force reselecting synchronisation source\r\nreselectdist <dist>         Modify reselection distance\r\n                            \r\nNTP sources:                \r\nactivity                    Check how many NTP sources are online/offline\r\nauthdata [-a] [-v]          Display information about authentication\r\nntpdata [<address>]         Display information about last valid measurement\r\nadd server <name> [options] Add new NTP server\r\nadd pool <name> [options]   Add new pool of NTP servers\r\nadd peer <name> [options]   Add new NTP peer\r\ndelete <address>            Remove server or peer\r\nburst <n-good>/<n-max> [[<mask>/]<address>]\r\n                            Start rapid set of measurements\r\nmaxdelay <address> <delay>  Modify maximum valid sample delay\r\nmaxdelayratio <address> <ratio>\r\n                            Modify maximum valid delay/minimum ratio\r\nmaxdelaydevratio <address> <ratio>\r\n                            Modify maximum valid delay/deviation ratio\r\nminpoll <address> <poll>    Modify minimum polling interval\r\nmaxpoll <address> <poll>    Modify maximum polling interval\r\nminstratum <address> <stratum>\r\n                            Modify minimum stratum\r\noffline [[<mask>/]<address>]\r\n                            Set sources in subnet to offline status\r\nonline [[<mask>/]<address>] Set sources in subnet to online status\r\nonoffline                   Set all sources to online or offline status\r\n                            according to network configuration\r\npolltarget <address> <target>\r\n                            Modify poll target\r\nrefresh                     Refresh IP addresses\r\nreload sources              Re-read *.sources files\r\nsourcename <address>        Display original name\r\n                            \r\nManual time input:          \r\nmanual off|on|reset         Disable/enable/reset settime command\r\nmanual list                 Show previous settime entries\r\nmanual delete <index>       Delete previous settime entry\r\nsettime <time>              Set daemon time\r\n                            (e.g. Sep 25, 2015 16:30:05 or 16:30:05)\r\n                            \r\nNTP access:                 \r\naccheck <address>           Check whether address is allowed\r\nclients [-p <packets>] [-k] [-r]\r\n                            Report on clients that accessed the server\r\nserverstats                 Display statistics of the server\r\nallow [<subnet>]            Allow access to subnet as a default\r\nallow all [<subnet>]        Allow access to subnet and all children\r\ndeny [<subnet>]             Deny access to subnet as a default\r\ndeny all [<subnet>]         Deny access to subnet and all children\r\nlocal [options]             Serve time even when not synchronised\r\nlocal off                   Don't serve time when not synchronised\r\nsmoothtime reset|activate   Reset/activate time smoothing\r\nsmoothing                   Display current time smoothing state\r\n                            \r\nMonitoring access:          \r\ncmdaccheck <address>        Check whether address is allowed\r\ncmdallow [<subnet>]         Allow access to subnet as a default\r\ncmdallow all [<subnet>]     Allow access to subnet and all children\r\ncmddeny [<subnet>]          Deny access to subnet as a default\r\ncmddeny all [<subnet>]      Deny access to subnet and all children\r\n                            \r\nReal-time clock:            \r\nrtcdata                     Print current RTC performance parameters\r\ntrimrtc                     Correct RTC relative to system clock\r\nwritertc                    Save RTC performance parameters to file\r\n                            \r\nOther daemon commands:      \r\ncyclelogs                   Close and re-open log files\r\ndump                        Dump measurements and NTS keys/cookies\r\nrekey                       Re-read keys\r\nreset sources               Drop all measurements\r\nshutdown                    Stop daemon\r\n                            \r\nClient commands:            \r\ndns -n|+n                   Disable/enable resolving IP addresses to hostnames\r\n" (spawn_id exp3) match glob pattern "chronyc>"? no
expect: set expect_out(spawn_id) "exp3"
expect: set expect_out(buffer) " help\r\nSystem clock:               \r\ntracking                    Display system time information\r\nmakestep                    Correct clock by stepping immediately\r\nmakestep <threshold> <updates>\r\n                            Configure automatic clock stepping\r\nmaxupdateskew <skew>        Modify maximum valid skew to update frequency\r\nwaitsync [<max-tries> [<max-correction> [<max-skew> [<interval>]]]]\r\n                            Wait until synchronised in specified limits\r\n                            \r\nTime sources:               \r\nsources [-a] [-v]           Display information about current sources\r\nsourcestats [-a] [-v]       Display statistics about collected measurements\r\nselectdata [-a] [-v]        Display information about source selection\r\nreselect                    Force reselecting synchronisation source\r\nreselectdist <dist>         Modify reselection distance\r\n                            \r\nNTP sources:                \r\nactivity                    Check how many NTP sources are online/offline\r\nauthdata [-a] [-v]          Display information about authentication\r\nntpdata [<address>]         Display information about last valid measurement\r\nadd server <name> [options] Add new NTP server\r\nadd pool <name> [options]   Add new pool of NTP servers\r\nadd peer <name> [options]   Add new NTP peer\r\ndelete <address>            Remove server or peer\r\nburst <n-good>/<n-max> [[<mask>/]<address>]\r\n                            Start rapid set of measurements\r\nmaxdelay <address> <delay>  Modify maximum valid sample delay\r\nmaxdelayratio <address> <ratio>\r\n                     \u0000      Modify maximum valid delay/minimum ratio\r\nmaxdelaydevratio <address> <ratio>\r\n                            Modify maximum valid delay/deviation ratio\r\nminpoll <address> <poll>    Modify minimum polling interval\r\nmaxpoll <address> <poll>    Modify maximum polling interval\r\nminstratum <address> <stratum>\r\n                            Modify minimum stratum\r\noffline [[<mask>/]<address>]\r\n                            Set sources in subnet to offline status\r\nonline [[<mask>/]<address>] Set sources in subnet to online status\r\nonoffline                   Set all sources to online or offline status\r\n                            according to network configuration\r\npolltarget <address> <target>\r\n                            Modify poll target\r\nrefresh                     Refresh IP addresses\r\nreload sources              Re-read *.sources files\r\nsourcename <address>        Display original name\r\n                            \r\nManual time input:          \r\nmanual off|on|reset         Disable/enable/reset settime command\r\nmanual list                 Show previous settime entries\r\nmanual delete <index>       Delete previous settime entry\r\nsettime <time>              Set daemon time\r\n                            (e.g. Sep 25, 2015 16:30:05 or 16:30:05)\r\n                            \r\nNTP access:                 \r\naccheck <address>           Check whether address is allowed\r\nclients [-p <packets>] [-k] [-r]\r\n                            Report on clients that accessed the server\r\nserverstats                 Display statistics of the server\r\nallow [<subnet>]            Allow access to subnet as a default\r\nallow all [<subnet>]        Allow access to subnet and all children\r\ndeny [<subnet>]             Deny access to subnet as a default\r\ndeny all [<subnet>]         Deny access to subnet and all children\r\nlocal [options]             Serve time even when not synchronised\r\nlocal off                   Don't serve time when not synchronised\r\nsmoothtime reset|activate   Reset/activate time smoothing\r\nsmoothing                   Display current time smoothing state\r\n                            \r\nMonitoring access:          \r\ncmdaccheck <address>        Check whether address is allowed\r\ncmdallow [<subnet>]         Allow access to subnet as a default\r\ncmdallow all [<subnet>]     Allow access to subnet and all children\r\ncmddeny [<subnet>]          Deny access to subnet as a default\r\ncmddeny all [<subnet>]      Deny access to subnet and all children\r\n                            \r\nReal-time clock:            \r\nrtcdata                     Print current RTC performance parameters\r\ntrimrtc                     Correct RTC relative to system clock\r\nwritertc                    Save RTC performance parameters to file\r\n                            \r\nOther daemon commands:      \r\ncyclelogs                   Close and re-open log files\r\ndump                        Dump measurements and NTS keys/cookies\r\nrekey                       Re-read keys\r\nreset sources               Drop all measurements\r\nshutdown                    Stop daemon\r\n                            \r\nClient commands:            \r\ndns -n|+n                   Disable/enable resolving IP addresses to hostnames\r\n"
dns -4|-6|-46               Resolve hostnames only to IPv4/IPv6/both addresses
timeout <milliseconds>      Set initial response timeout
retries <retries>           Set maximum number of retries
keygen [<id> [<type> [<bits>]]]
                            Generate key for key file
exit|quit                   Leave the program
help                        Generate this help
                            
chronyc> 
expect: does "       Modify maximum valid delay/minimum ratio\r\nmaxdelaydevratio <address> <ratio>\r\n                            Modify maximum valid delay/deviation ratio\r\nminpoll <address> <poll>    Modify minimum polling interval\r\nmaxpoll <address> <poll>    Modify maximum polling interval\r\nminstratum <address> <stratum>\r\n                            Modify minimum stratum\r\noffline [[<mask>/]<address>]\r\n                            Set sources in subnet to offline status\r\nonline [[<mask>/]<address>] Set sources in subnet to online status\r\nonoffline                   Set all sources to online or offline status\r\n                            according to network configuration\r\npolltarget <address> <target>\r\n                            Modify poll target\r\nrefresh                     Refresh IP addresses\r\nreload sources              Re-read *.sources files\r\nsourcename <address>        Display original name\r\n                            \r\nManual time input:          \r\nmanual off|on|reset         Disable/enable/reset settime command\r\nmanual list                 Show previous settime entries\r\nmanual delete <index>       Delete previous settime entry\r\nsettime <time>              Set daemon time\r\n                            (e.g. Sep 25, 2015 16:30:05 or 16:30:05)\r\n                            \r\nNTP access:                 \r\naccheck <address>           Check whether address is allowed\r\nclients [-p <packets>] [-k] [-r]\r\n                            Report on clients that accessed the server\r\nserverstats                 Display statistics of the server\r\nallow [<subnet>]            Allow access to subnet as a default\r\nallow all [<subnet>]        Allow access to subnet and all children\r\ndeny [<subnet>]             Deny access to subnet as a default\r\ndeny all [<subnet>]         Deny access to subnet and all children\r\nlocal [options]             Serve time even when not synchronised\r\nlocal off                   Don't serve time when not synchronised\r\nsmoothtime reset|activate   Reset/activate time smoothing\r\nsmoothing                   Display current time smoothing state\r\n                            \r\nMonitoring access:          \r\ncmdaccheck <address>        Check whether address is allowed\r\ncmdallow [<subnet>]         Allow access to subnet as a default\r\ncmdallow all [<subnet>]     Allow access to subnet and all children\r\ncmddeny [<subnet>]          Deny access to subnet as a default\r\ncmddeny all [<subnet>]      Deny access to subnet and all children\r\n                            \r\nReal-time clock:            \r\nrtcdata                     Print current RTC performance parameters\r\ntrimrtc                     Correct RTC relative to system clock\r\nwritertc                    Save RTC performance parameters to file\r\n                            \r\nOther daemon commands:      \r\ncyclelogs                   Close and re-open log files\r\ndump                        Dump measurements and NTS keys/cookies\r\nrekey                       Re-read keys\r\nreset sources               Drop all measurements\r\nshutdown                    Stop daemon\r\n                            \r\nClient commands:            \r\ndns -n|+n                   Disable/enable resolving IP addresses to hostnames\r\ndns -4|-6|-46               Resolve hostnames only to IPv4/IPv6/both addresses\r\ntimeout <milliseconds>      Set initial response timeout\r\nretries <retries>           Set maximum number of retries\r\nkeygen [<id> [<type> [<bits>]]]\r\n                            Generate key for key file\r\nexit|quit                   Leave the program\r\nhelp                        Generate this help\r\n                            \r\nchronyc> " (spawn_id exp3) match glob pattern "chronyc>"? yes
expect: set expect_out(0,string) "chronyc>"
expect: set expect_out(spawn_id) "exp3"
expect: set expect_out(buffer) "       Modify maximum valid delay/minimum ratio\r\nmaxdelaydevratio <address> <ratio>\r\n                            Modify maximum valid delay/deviation ratio\r\nminpoll <address> <poll>    Modify minimum polling interval\r\nmaxpoll <address> <poll>    Modify maximum polling interval\r\nminstratum <address> <stratum>\r\n                            Modify minimum stratum\r\noffline [[<mask>/]<address>]\r\n                            Set sources in subnet to offline status\r\nonline [[<mask>/]<address>] Set sources in subnet to online status\r\nonoffline                   Set all sources to online or offline status\r\n                            according to network configuration\r\npolltarget <address> <target>\r\n                            Modify poll target\r\nrefresh                     Refresh IP addresses\r\nreload sources              Re-read *.sources files\r\nsourcename <address>        Display original name\r\n                            \r\nManual time input:          \r\nmanual off|on|reset         Disable/enable/reset settime command\r\nmanual list                 Show previous settime entries\r\nmanual delete <index>       Delete previous settime entry\r\nsettime <time>              Set daemon time\r\n                            (e.g. Sep 25, 2015 16:30:05 or 16:30:05)\r\n                            \r\nNTP access:                 \r\naccheck <address>           Check whether address is allowed\r\nclients [-p <packets>] [-k] [-r]\r\n                            Report on clients that accessed the server\r\nserverstats                 Display statistics of the server\r\nallow [<subnet>]            Allow access to subnet as a default\r\nallow all [<subnet>]        Allow access to subnet and all children\r\ndeny [<subnet>]             Deny access to subnet as a default\r\ndeny all [<subnet>]         Deny access to subnet and all children\r\nlocal [options]             Serve time even when not synchronised\r\nlocal off                   Don't serve time when not synchronised\r\nsmoothtime reset|activate   Reset/activate time smoothing\r\nsmoothing                   Display current time smoothing state\r\n                            \r\nMonitoring access:          \r\ncmdaccheck <address>        Check whether address is allowed\r\ncmdallow [<subnet>]         Allow access to subnet as a default\r\ncmdallow all [<subnet>]     Allow access to subnet and all children\r\ncmddeny [<subnet>]          Deny access to subnet as a default\r\ncmddeny all [<subnet>]      Deny access to subnet and all children\r\n                            \r\nReal-time clock:            \r\nrtcdata                     Print current RTC performance parameters\r\ntrimrtc                     Correct RTC relative to system clock\r\nwritertc                    Save RTC performance parameters to file\r\n                            \r\nOther daemon commands:      \r\ncyclelogs                   Close and re-open log files\r\ndump                        Dump measurements and NTS keys/cookies\r\nrekey                       Re-read keys\r\nreset sources               Drop all measurements\r\nshutdown                    Stop daemon\r\n                            \r\nClient commands:            \r\ndns -n|+n                   Disable/enable resolving IP addresses to hostnames\r\ndns -4|-6|-46               Resolve hostnames only to IPv4/IPv6/both addresses\r\ntimeout <milliseconds>      Set initial response timeout\r\nretries <retries>           Set maximum number of retries\r\nkeygen [<id> [<type> [<bits>]]]\r\n                            Generate key for key file\r\nexit|quit                   Leave the program\r\nhelp                        Generate this help\r\n                            \r\nchronyc>"
send: sending "sourcestats -v\r" to { exp3 }

expect: does " " (spawn_id exp3) match glob pattern "chronyc>"? no
sourcestats -v

expect: does " sourcestats -v\r\n" (spawn_id exp3) match glob pattern "chronyc>"? no
                             .- Number of sample points in measurement set.
                            /    .- Number of residual runs with same sign.
                           |    /    .- Length of measurement set (time).

expect: does " sourcestats -v\r\n                             .- Number of sample points in measurement set.\r\n                            /    .- Number of residual runs with same sign.\r\n                           |    /    .- Length of measurement set (time).\r\n" (spawn_id exp3) match glob pattern "chronyc>"? no
                           |   |    /      .- Est. clock freq error (ppm).
                           |   |   |      /           .- Est. error in freq.
                           |   |   |     |           /         .- Est. offset.
                           |   |   |     |          |          |   On the -.
                           |   |   |     |          |          |   samples. \
                           |   |   |     |          |          |             |
Name/IP Address            NP  NR  Span  Frequency  Freq Skew  Offset  Std Dev
==============================================================================

expect: does " sourcestats -v\r\n                             .- Number of sample points in measurement set.\r\n                            /    .- Number of residual runs with same sign.\r\n                           |    /    .- Length of measurement set (time).\r\n                           |   |    /      .- Est. clock freq error (ppm).\r\n                           |   |   |      /           .- Est. error in freq.\r\n                           |   |   |     |           /         .- Est. offset.\r\n                           |   |   |     |          |          |   On the -.\r\n                           |   |   |     |          |          |   samples. \\r\n                           |   |   |     |          |          |             |\r\nName/IP Address            NP  NR  Span  Frequency  Freq Skew  Offset  Std Dev\r\n==============================================================================\r\n" (spawn_id exp3) match glob pattern "chronyc>"? no
tick.ntp.infomaniak.ch      2   0     2     +0.000   2000.000    +11ms  4000ms

expect: does " sourcestats -v\r\n                             .- Number of sample points in measurement set.\r\n                            /    .- Number of residual runs with same sign.\r\n                           |    /    .- Length of measurement set (time).\r\n                           |   |    /      .- Est. clock freq error (ppm).\r\n                           |   |   |      /           .- Est. error in freq.\r\n                           |   |   |     |           /         .- Est. offset.\r\n                           |   |   |     |          |          |   On the -.\r\n                           |   |   |     |          |          |   samples. \\r\n                           |   |   |     |          |          |             |\r\nName/IP Address            NP  NR  Span  Frequency  Freq Skew  Offset  Std Dev\r\n==============================================================================\r\ntick.ntp.infomaniak.ch      2   0     2     +0.000   2000.000    +11ms  4000ms\r\n" (spawn_id exp3) match glob pattern "chronyc>"? no
electrode.felixc.at         2   0     3     +0.000   2000.000    -36ms  4000ms

expect: does " sourcestats -v\r\n                             .- Number of sample points in measurement set.\r\n                            /    .- Number of residual runs with same sign.\r\n                           |    /    .- Length of measurement set (time).\r\n                           |   |    /      .- Est. clock freq error (ppm).\r\n                           |   |   |      /           .- Est. error in freq.\r\n                           |   |   |     |           /         .- Est. offset.\r\n                           |   |   |     |          |          |   On the -.\r\n                           |   |   |     |          |          |   samples. \\r\n                           |   |   |     |          |          |             |\r\nName/IP Address            NP  NR  Span  Frequency  Freq Skew  Offset  Std Dev\r\n==============================================================================\r\ntick.ntp.infomaniak.ch      2   0     2     +0.000   2000.000    +11ms  4000ms\r\nelectrode.felixc.at         2   0     3     +0.000   2000.000    -36ms  4000ms\r\n" (spawn_id exp3) match glob pattern "chronyc>"? no
time.cloudflare.com         2   0     2     +0.000   2000.000  -1563us  4000ms

expect: does " sourcestats -v\r\n                             .- Number of sample points in measurement set.\r\n                            /    .- Number of residual runs with same sign.\r\n                           |    /    .- Length of measurement set (time).\r\n                           |   |    /      .- Est. clock freq error (ppm).\r\n                           |   |   |      /           .- Est. error in freq.\r\n                           |   |   |     |           /         .- Est. offset.\r\n                           |   |   |     |          |          |   On the -.\r\n                           |   |   |     |          |          |   samples. \\r\n                           |   |   |     |          |          |             |\r\nName/IP Address            NP  NR  Span  Frequency  Freq Skew  Offset  Std Dev\r\n==============================================================================\r\ntick.ntp.infomaniak.ch      2   0     2     +0.000   2000.000    +11ms  4000ms\r\nelectrode.felixc.at         2   0     3     +0.000   2000.000    -36ms  4000ms\r\ntime.cloudflare.com         2   0     2     +0.000   2000.000  -1563us  4000ms\r\n" (spawn_id exp3) match glob pattern "chronyc>"? no
ntp5.flashdance.cx          2   0     2     +0.000   2000.000  -3526us  4000ms

expect: does " sourcestats -v\r\n                             .- Number of sample points in measurement set.\r\n                            /    .- Number of residual runs with same sign.\r\n                           |    /    .- Length of measurement set (time).\r\n                           |   |    /      .- Est. clock freq error (ppm).\r\n                           |   |   |      /           .- Est. error in freq.\r\n                           |   |   |     |           /         .- Est. offset.\r\n                           |   |   |     |          |          |   On the -.\r\n                           |   |   |     |          |          |   samples. \\r\n                           |   |   |     |          |          |             |\r\nName/IP Address            NP  NR  Span  Frequency  Freq Skew  Offset  Std Dev\r\n==============================================================================\r\ntick.ntp.infomaniak.ch      2   0     2     +0.000   2000.000    +11ms  4000ms\r\nelectrode.felixc.at         2   0     3     +0.000   2000.000    -36ms  4000ms\r\ntime.cloudflare.com         2   0     2     +0.000   2000.000  -1563us  4000ms\r\nntp5.flashdance.cx          2   0     2     +0.000   2000.000  -3526us  4000ms\r\n" (spawn_id exp3) match glob pattern "chronyc>"? no
chronyc> 
expect: does " sourcestats -v\r\n                             .- Number of sample points in measurement set.\r\n                            /    .- Number of residual runs with same sign.\r\n                           |    /    .- Length of measurement set (time).\r\n                           |   |    /      .- Est. clock freq error (ppm).\r\n                           |   |   |      /           .- Est. error in freq.\r\n                           |   |   |     |           /         .- Est. offset.\r\n                           |   |   |     |          |          |   On the -.\r\n                           |   |   |     |          |          |   samples. \\r\n                           |   |   |     |          |          |             |\r\nName/IP Address            NP  NR  Span  Frequency  Freq Skew  Offset  Std Dev\r\n==============================================================================\r\ntick.ntp.infomaniak.ch      2   0     2     +0.000   2000.000    +11ms  4000ms\r\nelectrode.felixc.at         2   0     3     +0.000   2000.000    -36ms  4000ms\r\ntime.cloudflare.com         2   0     2     +0.000   2000.000  -1563us  4000ms\r\nntp5.flashdance.cx          2   0     2     +0.000   2000.000  -3526us  4000ms\r\nchronyc> " (spawn_id exp3) match glob pattern "chronyc>"? yes
expect: set expect_out(0,string) "chronyc>"
expect: set expect_out(spawn_id) "exp3"
expect: set expect_out(buffer) " sourcestats -v\r\n                             .- Number of sample points in measurement set.\r\n                            /    .- Number of residual runs with same sign.\r\n                           |    /    .- Length of measurement set (time).\r\n                           |   |    /      .- Est. clock freq error (ppm).\r\n                           |   |   |      /           .- Est. error in freq.\r\n                           |   |   |     |           /         .- Est. offset.\r\n                           |   |   |     |          |          |   On the -.\r\n                           |   |   |     |          |          |   samples. \\r\n                           |   |   |     |          |          |             |\r\nName/IP Address            NP  NR  Span  Frequency  Freq Skew  Offset  Std Dev\r\n==============================================================================\r\ntick.ntp.infomaniak.ch      2   0     2     +0.000   2000.000    +11ms  4000ms\r\nelectrode.felixc.at         2   0     3     +0.000   2000.000    -36ms  4000ms\r\ntime.cloudflare.com         2   0     2     +0.000   2000.000  -1563us  4000ms\r\nntp5.flashdance.cx          2   0     2     +0.000   2000.000  -3526us  4000ms\r\nchronyc>"
send: sending "quit\r" to { exp3 }
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ grep -i Manual testlog
Manual time input:          
manual off|on|reset         Disable/enable/reset settime command
manual list                 Show previous settime entries
manual delete <index>       Delete previous settime entry
expect: does " help\r\nSystem clock:               \r\ntracking                    Display system time information\r\nmakestep                    Correct clock by stepping immediately\r\nmakestep <threshold> <updates>\r\n                            Configure automatic clock stepping\r\nmaxupdateskew <skew>        Modify maximum valid skew to update frequency\r\nwaitsync [<max-tries> [<max-correction> [<max-skew> [<interval>]]]]\r\n                            Wait until synchronised in specified limits\r\n                            \r\nTime sources:               \r\nsources [-a] [-v]           Display information about current sources\r\nsourcestats [-a] [-v]       Display statistics about collected measurements\r\nselectdata [-a] [-v]        Display information about source selection\r\nreselect                    Force reselecting synchronisation source\r\nreselectdist <dist>         Modify reselection distance\r\n                            \r\nNTP sources:                \r\nactivity                    Check how many NTP sources are online/offline\r\nauthdata [-a] [-v]          Display information about authentication\r\nntpdata [<address>]         Display information about last valid measurement\r\nadd server <name> [options] Add new NTP server\r\nadd pool <name> [options]   Add new pool of NTP servers\r\nadd peer <name> [options]   Add new NTP peer\r\ndelete <address>            Remove server or peer\r\nburst <n-good>/<n-max> [[<mask>/]<address>]\r\n                            Start rapid set of measurements\r\nmaxdelay <address> <delay>  Modify maximum valid sample delay\r\nmaxdelayratio <address> <ratio>\r\n                            Modify maximum valid delay/minimum ratio\r\nmaxdelaydevratio <address> <ratio>\r\n                            Modify maximum valid delay/deviation ratio\r\nminpoll <address> <poll>    Modify minimum polling interval\r\nmaxpoll <address> <poll>    Modify maximum polling interval\r\nminstratum <address> <stratum>\r\n                            Modify minimum stratum\r\noffline [[<mask>/]<address>]\r\n                            Set sources in subnet to offline status\r\nonline [[<mask>/]<address>] Set sources in subnet to online status\r\nonoffline                   Set all sources to online or offline status\r\n                            according to network configuration\r\npolltarget <address> <target>\r\n                            Modify poll target\r\nrefresh                     Refresh IP addresses\r\nreload sources              Re-read *.sources files\r\nsourcename <address>        Display original name\r\n                            \r\nManual time input:          \r\nmanual off|on|reset         Disable/enable/reset settime command\r\nmanual list                 Show previous settime entries\r\nmanual delete <index>       Delete previous settime entry\r\nsettime <time>              Set daemon time\r\n                            (e.g. Sep 25, 2015 16:30:05 or 16:30:05)\r\n                            \r\nNTP access:                 \r\naccheck <address>           Check whether address is allowed\r\nclients [-p <packets>] [-k] [-r]\r\n                            Report on clients that accessed the server\r\nserverstats                 Display statistics of the server\r\nallow [<subnet>]            Allow access to subnet as a default\r\nallow all [<subnet>]        Allow access to subnet and all children\r\ndeny [<subnet>]             Deny access to subnet as a default\r\ndeny all [<subnet>]         Deny access to subnet and all children\r\nlocal [options]             Serve time even when not synchronised\r\nlocal off                   Don't serve time when not synchronised\r\nsmoothtime reset|activate   Reset/activate time smoothing\r\nsmoothing                   Display current time smoothing state\r\n                            \r\nMonitoring access:          \r\ncmdaccheck <address>        Check whether address is allowed\r\ncmdallow [<subnet>]         Allow access to subnet as a default\r\ncmdallow all [<subnet>]     Allow access to subnet and all children\r\ncmddeny [<subnet>]          Deny access to subnet as a default\r\ncmddeny all [<subnet>]      Deny access to subnet and all children\r\n                            \r\nReal-time clock:            \r\nrtcdata                     Print current RTC performance parameters\r\ntrimrtc                     Correct RTC relative to system clock\r\nwritertc                    Save RTC performance parameters to file\r\n                            \r\nOther daemon commands:      \r\ncyclelogs                   Close and re-open log files\r\ndump                        Dump measurements and NTS keys/cookies\r\nrekey                       Re-read keys\r\nreset sources               Drop all measurements\r\nshutdown                    Stop daemon\r\n                            \r\nClient commands:            \r\ndns -n|+n                   Disable/enable resolving IP addresses to hostnames\r\n" (spawn_id exp3) match glob pattern "chronyc>"? no
expect: set expect_out(buffer) " help\r\nSystem clock:               \r\ntracking                    Display system time information\r\nmakestep                    Correct clock by stepping immediately\r\nmakestep <threshold> <updates>\r\n                            Configure automatic clock stepping\r\nmaxupdateskew <skew>        Modify maximum valid skew to update frequency\r\nwaitsync [<max-tries> [<max-correction> [<max-skew> [<interval>]]]]\r\n                            Wait until synchronised in specified limits\r\n                            \r\nTime sources:               \r\nsources [-a] [-v]           Display information about current sources\r\nsourcestats [-a] [-v]       Display statistics about collected measurements\r\nselectdata [-a] [-v]        Display information about source selection\r\nreselect                    Force reselecting synchronisation source\r\nreselectdist <dist>         Modify reselection distance\r\n                            \r\nNTP sources:                \r\nactivity                    Check how many NTP sources are online/offline\r\nauthdata [-a] [-v]          Display information about authentication\r\nntpdata [<address>]         Display information about last valid measurement\r\nadd server <name> [options] Add new NTP server\r\nadd pool <name> [options]   Add new pool of NTP servers\r\nadd peer <name> [options]   Add new NTP peer\r\ndelete <address>            Remove server or peer\r\nburst <n-good>/<n-max> [[<mask>/]<address>]\r\n                            Start rapid set of measurements\r\nmaxdelay <address> <delay>  Modify maximum valid sample delay\r\nmaxdelayratio <address> <ratio>\r\n                     \u0000      Modify maximum valid delay/minimum ratio\r\nmaxdelaydevratio <address> <ratio>\r\n                            Modify maximum valid delay/deviation ratio\r\nminpoll <address> <poll>    Modify minimum polling interval\r\nmaxpoll <address> <poll>    Modify maximum polling interval\r\nminstratum <address> <stratum>\r\n                            Modify minimum stratum\r\noffline [[<mask>/]<address>]\r\n                            Set sources in subnet to offline status\r\nonline [[<mask>/]<address>] Set sources in subnet to online status\r\nonoffline                   Set all sources to online or offline status\r\n                            according to network configuration\r\npolltarget <address> <target>\r\n                            Modify poll target\r\nrefresh                     Refresh IP addresses\r\nreload sources              Re-read *.sources files\r\nsourcename <address>        Display original name\r\n                            \r\nManual time input:          \r\nmanual off|on|reset         Disable/enable/reset settime command\r\nmanual list                 Show previous settime entries\r\nmanual delete <index>       Delete previous settime entry\r\nsettime <time>              Set daemon time\r\n                            (e.g. Sep 25, 2015 16:30:05 or 16:30:05)\r\n                            \r\nNTP access:                 \r\naccheck <address>           Check whether address is allowed\r\nclients [-p <packets>] [-k] [-r]\r\n                            Report on clients that accessed the server\r\nserverstats                 Display statistics of the server\r\nallow [<subnet>]            Allow access to subnet as a default\r\nallow all [<subnet>]        Allow access to subnet and all children\r\ndeny [<subnet>]             Deny access to subnet as a default\r\ndeny all [<subnet>]         Deny access to subnet and all children\r\nlocal [options]             Serve time even when not synchronised\r\nlocal off                   Don't serve time when not synchronised\r\nsmoothtime reset|activate   Reset/activate time smoothing\r\nsmoothing                   Display current time smoothing state\r\n                            \r\nMonitoring access:          \r\ncmdaccheck <address>        Check whether address is allowed\r\ncmdallow [<subnet>]         Allow access to subnet as a default\r\ncmdallow all [<subnet>]     Allow access to subnet and all children\r\ncmddeny [<subnet>]          Deny access to subnet as a default\r\ncmddeny all [<subnet>]      Deny access to subnet and all children\r\n                            \r\nReal-time clock:            \r\nrtcdata                     Print current RTC performance parameters\r\ntrimrtc                     Correct RTC relative to system clock\r\nwritertc                    Save RTC performance parameters to file\r\n                            \r\nOther daemon commands:      \r\ncyclelogs                   Close and re-open log files\r\ndump                        Dump measurements and NTS keys/cookies\r\nrekey                       Re-read keys\r\nreset sources               Drop all measurements\r\nshutdown                    Stop daemon\r\n                            \r\nClient commands:            \r\ndns -n|+n                   Disable/enable resolving IP addresses to hostnames\r\n"
expect: does "       Modify maximum valid delay/minimum ratio\r\nmaxdelaydevratio <address> <ratio>\r\n                            Modify maximum valid delay/deviation ratio\r\nminpoll <address> <poll>    Modify minimum polling interval\r\nmaxpoll <address> <poll>    Modify maximum polling interval\r\nminstratum <address> <stratum>\r\n                            Modify minimum stratum\r\noffline [[<mask>/]<address>]\r\n                            Set sources in subnet to offline status\r\nonline [[<mask>/]<address>] Set sources in subnet to online status\r\nonoffline                   Set all sources to online or offline status\r\n                            according to network configuration\r\npolltarget <address> <target>\r\n                            Modify poll target\r\nrefresh                     Refresh IP addresses\r\nreload sources              Re-read *.sources files\r\nsourcename <address>        Display original name\r\n                            \r\nManual time input:          \r\nmanual off|on|reset         Disable/enable/reset settime command\r\nmanual list                 Show previous settime entries\r\nmanual delete <index>       Delete previous settime entry\r\nsettime <time>              Set daemon time\r\n                            (e.g. Sep 25, 2015 16:30:05 or 16:30:05)\r\n                            \r\nNTP access:                 \r\naccheck <address>           Check whether address is allowed\r\nclients [-p <packets>] [-k] [-r]\r\n                            Report on clients that accessed the server\r\nserverstats                 Display statistics of the server\r\nallow [<subnet>]            Allow access to subnet as a default\r\nallow all [<subnet>]        Allow access to subnet and all children\r\ndeny [<subnet>]             Deny access to subnet as a default\r\ndeny all [<subnet>]         Deny access to subnet and all children\r\nlocal [options]             Serve time even when not synchronised\r\nlocal off                   Don't serve time when not synchronised\r\nsmoothtime reset|activate   Reset/activate time smoothing\r\nsmoothing                   Display current time smoothing state\r\n                            \r\nMonitoring access:          \r\ncmdaccheck <address>        Check whether address is allowed\r\ncmdallow [<subnet>]         Allow access to subnet as a default\r\ncmdallow all [<subnet>]     Allow access to subnet and all children\r\ncmddeny [<subnet>]          Deny access to subnet as a default\r\ncmddeny all [<subnet>]      Deny access to subnet and all children\r\n                            \r\nReal-time clock:            \r\nrtcdata                     Print current RTC performance parameters\r\ntrimrtc                     Correct RTC relative to system clock\r\nwritertc                    Save RTC performance parameters to file\r\n                            \r\nOther daemon commands:      \r\ncyclelogs                   Close and re-open log files\r\ndump                        Dump measurements and NTS keys/cookies\r\nrekey                       Re-read keys\r\nreset sources               Drop all measurements\r\nshutdown                    Stop daemon\r\n                            \r\nClient commands:            \r\ndns -n|+n                   Disable/enable resolving IP addresses to hostnames\r\ndns -4|-6|-46               Resolve hostnames only to IPv4/IPv6/both addresses\r\ntimeout <milliseconds>      Set initial response timeout\r\nretries <retries>           Set maximum number of retries\r\nkeygen [<id> [<type> [<bits>]]]\r\n                            Generate key for key file\r\nexit|quit                   Leave the program\r\nhelp                        Generate this help\r\n                            \r\nchronyc> " (spawn_id exp3) match glob pattern "chronyc>"? yes
expect: set expect_out(buffer) "       Modify maximum valid delay/minimum ratio\r\nmaxdelaydevratio <address> <ratio>\r\n                            Modify maximum valid delay/deviation ratio\r\nminpoll <address> <poll>    Modify minimum polling interval\r\nmaxpoll <address> <poll>    Modify maximum polling interval\r\nminstratum <address> <stratum>\r\n                            Modify minimum stratum\r\noffline [[<mask>/]<address>]\r\n                            Set sources in subnet to offline status\r\nonline [[<mask>/]<address>] Set sources in subnet to online status\r\nonoffline                   Set all sources to online or offline status\r\n                            according to network configuration\r\npolltarget <address> <target>\r\n                            Modify poll target\r\nrefresh                     Refresh IP addresses\r\nreload sources              Re-read *.sources files\r\nsourcename <address>        Display original name\r\n                            \r\nManual time input:          \r\nmanual off|on|reset         Disable/enable/reset settime command\r\nmanual list                 Show previous settime entries\r\nmanual delete <index>       Delete previous settime entry\r\nsettime <time>              Set daemon time\r\n                            (e.g. Sep 25, 2015 16:30:05 or 16:30:05)\r\n                            \r\nNTP access:                 \r\naccheck <address>           Check whether address is allowed\r\nclients [-p <packets>] [-k] [-r]\r\n                            Report on clients that accessed the server\r\nserverstats                 Display statistics of the server\r\nallow [<subnet>]            Allow access to subnet as a default\r\nallow all [<subnet>]        Allow access to subnet and all children\r\ndeny [<subnet>]             Deny access to subnet as a default\r\ndeny all [<subnet>]         Deny access to subnet and all children\r\nlocal [options]             Serve time even when not synchronised\r\nlocal off                   Don't serve time when not synchronised\r\nsmoothtime reset|activate   Reset/activate time smoothing\r\nsmoothing                   Display current time smoothing state\r\n                            \r\nMonitoring access:          \r\ncmdaccheck <address>        Check whether address is allowed\r\ncmdallow [<subnet>]         Allow access to subnet as a default\r\ncmdallow all [<subnet>]     Allow access to subnet and all children\r\ncmddeny [<subnet>]          Deny access to subnet as a default\r\ncmddeny all [<subnet>]      Deny access to subnet and all children\r\n                            \r\nReal-time clock:            \r\nrtcdata                     Print current RTC performance parameters\r\ntrimrtc                     Correct RTC relative to system clock\r\nwritertc                    Save RTC performance parameters to file\r\n                            \r\nOther daemon commands:      \r\ncyclelogs                   Close and re-open log files\r\ndump                        Dump measurements and NTS keys/cookies\r\nrekey                       Re-read keys\r\nreset sources               Drop all measurements\r\nshutdown                    Stop daemon\r\n                            \r\nClient commands:            \r\ndns -n|+n                   Disable/enable resolving IP addresses to hostnames\r\ndns -4|-6|-46               Resolve hostnames only to IPv4/IPv6/both addresses\r\ntimeout <milliseconds>      Set initial response timeout\r\nretries <retries>           Set maximum number of retries\r\nkeygen [<id> [<type> [<bits>]]]\r\n                            Generate key for key file\r\nexit|quit                   Leave the program\r\nhelp                        Generate this help\r\n                            \r\nchronyc>"
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ grep 'Name/IP Address' testlog
Name/IP Address            NP  NR  Span  Frequency  Freq Skew  Offset  Std Dev
expect: does " sourcestats -v\r\n                             .- Number of sample points in measurement set.\r\n                            /    .- Number of residual runs with same sign.\r\n                           |    /    .- Length of measurement set (time).\r\n                           |   |    /      .- Est. clock freq error (ppm).\r\n                           |   |   |      /           .- Est. error in freq.\r\n                           |   |   |     |           /         .- Est. offset.\r\n                           |   |   |     |          |          |   On the -.\r\n                           |   |   |     |          |          |   samples. \\r\n                           |   |   |     |          |          |             |\r\nName/IP Address            NP  NR  Span  Frequency  Freq Skew  Offset  Std Dev\r\n==============================================================================\r\n" (spawn_id exp3) match glob pattern "chronyc>"? no
expect: does " sourcestats -v\r\n                             .- Number of sample points in measurement set.\r\n                            /    .- Number of residual runs with same sign.\r\n                           |    /    .- Length of measurement set (time).\r\n                           |   |    /      .- Est. clock freq error (ppm).\r\n                           |   |   |      /           .- Est. error in freq.\r\n                           |   |   |     |           /         .- Est. offset.\r\n                           |   |   |     |          |          |   On the -.\r\n                           |   |   |     |          |          |   samples. \\r\n                           |   |   |     |          |          |             |\r\nName/IP Address            NP  NR  Span  Frequency  Freq Skew  Offset  Std Dev\r\n==============================================================================\r\ntick.ntp.infomaniak.ch      2   0     2     +0.000   2000.000    +11ms  4000ms\r\n" (spawn_id exp3) match glob pattern "chronyc>"? no
expect: does " sourcestats -v\r\n                             .- Number of sample points in measurement set.\r\n                            /    .- Number of residual runs with same sign.\r\n                           |    /    .- Length of measurement set (time).\r\n                           |   |    /      .- Est. clock freq error (ppm).\r\n                           |   |   |      /           .- Est. error in freq.\r\n                           |   |   |     |           /         .- Est. offset.\r\n                           |   |   |     |          |          |   On the -.\r\n                           |   |   |     |          |          |   samples. \\r\n                           |   |   |     |          |          |             |\r\nName/IP Address            NP  NR  Span  Frequency  Freq Skew  Offset  Std Dev\r\n==============================================================================\r\ntick.ntp.infomaniak.ch      2   0     2     +0.000   2000.000    +11ms  4000ms\r\nelectrode.felixc.at         2   0     3     +0.000   2000.000    -36ms  4000ms\r\n" (spawn_id exp3) match glob pattern "chronyc>"? no
expect: does " sourcestats -v\r\n                             .- Number of sample points in measurement set.\r\n                            /    .- Number of residual runs with same sign.\r\n                           |    /    .- Length of measurement set (time).\r\n                           |   |    /      .- Est. clock freq error (ppm).\r\n                           |   |   |      /           .- Est. error in freq.\r\n                           |   |   |     |           /         .- Est. offset.\r\n                           |   |   |     |          |          |   On the -.\r\n                           |   |   |     |          |          |   samples. \\r\n                           |   |   |     |          |          |             |\r\nName/IP Address            NP  NR  Span  Frequency  Freq Skew  Offset  Std Dev\r\n==============================================================================\r\ntick.ntp.infomaniak.ch      2   0     2     +0.000   2000.000    +11ms  4000ms\r\nelectrode.felixc.at         2   0     3     +0.000   2000.000    -36ms  4000ms\r\ntime.cloudflare.com         2   0     2     +0.000   2000.000  -1563us  4000ms\r\n" (spawn_id exp3) match glob pattern "chronyc>"? no
expect: does " sourcestats -v\r\n                             .- Number of sample points in measurement set.\r\n                            /    .- Number of residual runs with same sign.\r\n                           |    /    .- Length of measurement set (time).\r\n                           |   |    /      .- Est. clock freq error (ppm).\r\n                           |   |   |      /           .- Est. error in freq.\r\n                           |   |   |     |           /         .- Est. offset.\r\n                           |   |   |     |          |          |   On the -.\r\n                           |   |   |     |          |          |   samples. \\r\n                           |   |   |     |          |          |             |\r\nName/IP Address            NP  NR  Span  Frequency  Freq Skew  Offset  Std Dev\r\n==============================================================================\r\ntick.ntp.infomaniak.ch      2   0     2     +0.000   2000.000    +11ms  4000ms\r\nelectrode.felixc.at         2   0     3     +0.000   2000.000    -36ms  4000ms\r\ntime.cloudflare.com         2   0     2     +0.000   2000.000  -1563us  4000ms\r\nntp5.flashdance.cx          2   0     2     +0.000   2000.000  -3526us  4000ms\r\n" (spawn_id exp3) match glob pattern "chronyc>"? no
expect: does " sourcestats -v\r\n                             .- Number of sample points in measurement set.\r\n                            /    .- Number of residual runs with same sign.\r\n                           |    /    .- Length of measurement set (time).\r\n                           |   |    /      .- Est. clock freq error (ppm).\r\n                           |   |   |      /           .- Est. error in freq.\r\n                           |   |   |     |           /         .- Est. offset.\r\n                           |   |   |     |          |          |   On the -.\r\n                           |   |   |     |          |          |   samples. \\r\n                           |   |   |     |          |          |             |\r\nName/IP Address            NP  NR  Span  Frequency  Freq Skew  Offset  Std Dev\r\n==============================================================================\r\ntick.ntp.infomaniak.ch      2   0     2     +0.000   2000.000    +11ms  4000ms\r\nelectrode.felixc.at         2   0     3     +0.000   2000.000    -36ms  4000ms\r\ntime.cloudflare.com         2   0     2     +0.000   2000.000  -1563us  4000ms\r\nntp5.flashdance.cx          2   0     2     +0.000   2000.000  -3526us  4000ms\r\nchronyc> " (spawn_id exp3) match glob pattern "chronyc>"? yes
expect: set expect_out(buffer) " sourcestats -v\r\n                             .- Number of sample points in measurement set.\r\n                            /    .- Number of residual runs with same sign.\r\n                           |    /    .- Length of measurement set (time).\r\n                           |   |    /      .- Est. clock freq error (ppm).\r\n                           |   |   |      /           .- Est. error in freq.\r\n                           |   |   |     |           /         .- Est. offset.\r\n                           |   |   |     |          |          |   On the -.\r\n                           |   |   |     |          |          |   samples. \\r\n                           |   |   |     |          |          |             |\r\nName/IP Address            NP  NR  Span  Frequency  Freq Skew  Offset  Std Dev\r\n==============================================================================\r\ntick.ntp.infomaniak.ch      2   0     2     +0.000   2000.000    +11ms  4000ms\r\nelectrode.felixc.at         2   0     3     +0.000   2000.000    -36ms  4000ms\r\ntime.cloudflare.com         2   0     2     +0.000   2000.000  -1563us  4000ms\r\nntp5.flashdance.cx          2   0     2     +0.000   2000.000  -3526us  4000ms\r\nchronyc>"
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ LOG_INFO 'End to run test.'
+ message='End to run test.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End to run test.'
Thu Jul 27 23:49:32 2023 - INFO  - End to run test.
+ CASE_RESULT 0
+ case_re=0
+ test -z ''
+ test 0 -eq 0
+ LOG_INFO 'succeed to execute the case.'
+ message='succeed to execute the case.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'succeed to execute the case.'
Thu Jul 27 23:49:34 2023 - INFO  - succeed to execute the case.
+ exec_result=
+ exit 0
+ post_test
+ LOG_INFO 'Start to restore the test environment.'
+ message='Start to restore the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to restore the test environment.'
Thu Jul 27 23:49:35 2023 - INFO  - Start to restore the test environment.
+ rm -rf ./testlog
+ systemctl stop chronyd
+ DNF_REMOVE
+ node=1
+ pkg_list=
+ mode=0
+ [[ -z /tmp/tmpdod6e7ai ]]
+ '[' 0 -ne 0 ']'
+ '[' 1 == 0 ']'
+ python3 /root/mugen/libs/locallibs/rpm_manage.py remove --node 1 --pkgs '' --tempfile /tmp/tmpdod6e7ai
+ '[' 0 -ne 0 ']'
+ LOG_INFO 'End to restore the test environment.'
+ message='End to restore the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End to restore the test environment.'
Thu Jul 27 23:50:08 2023 - INFO  - End to restore the test environment.
