+ source /root/mugen/libs/locallibs/common_lib.sh
++ python3 --version
+ source /root/mugen/libs/locallibs/common_lib.sh
++ '[' 0 -eq 0 ']'
++ python3 --version
++ source /root/mugen/libs/locallibs/common_lib_python.sh
+ main
++ type -t post_test
+ '[' -n function ']'
+ trap post_test EXIT INT HUP TERM
+ rpm -qa
+ grep expect
++ '[' 0 -eq 0 ']'
++ source /root/mugen/libs/locallibs/common_lib_python.sh
+ main
++ type -t post_test
+ '[' -n function ']'
+ trap post_test EXIT INT HUP TERM
+ rpm -qa
+ grep expect
++ type -t config_params
+ '[' -n '' ']'
++ type -t config_params
+ '[' -n '' ']'
++ type -t pre_test
+ '[' -n function ']'
+ pre_test
+ LOG_INFO 'Start to prepare the test environment.'
+ message='Start to prepare the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to prepare the test environment.'
++ type -t pre_test
+ '[' -n function ']'
+ pre_test
+ LOG_INFO 'Start to prepare the test environment.'
+ message='Start to prepare the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to prepare the test environment.'
Thu Jul 27 17:45:48 2023 - INFO  - Start to prepare the test environment.
Thu Jul 27 17:45:48 2023 - INFO  - Start to prepare the test environment.
+ DNF_INSTALL dos2unix
+ pkgs=dos2unix
+ node=1
+ '[' -z '' ']'
+ tmpfile=
++ python3 /root/mugen/libs/locallibs/rpm_manage.py install --pkgs dos2unix --node 1 --tempfile ''
+ DNF_INSTALL dos2unix
+ pkgs=dos2unix
+ node=1
+ '[' -z '' ']'
+ tmpfile=
++ python3 /root/mugen/libs/locallibs/rpm_manage.py install --pkgs dos2unix --node 1 --tempfile ''
+ tmpfile2='Last metadata expiration check: 1:09:48 ago on Thu 27 Jul 2023 04:37:11 PM CST.
Dependencies resolved.
================================================================================
 Package          Architecture    Version                Repository        Size
================================================================================
Installing:
 dos2unix         riscv64         7.4.3-1.oe2303         mainline         208 k

Transaction Summary
================================================================================
Install  1 Package

Total size: 208 k
Installed size: 572 k
Downloading Packages:
[SKIPPED] dos2unix-7.4.3-1.oe2303.riscv64.rpm: Already downloaded              
Running transaction check
Waiting for process with pid 1178 to finish.
Transaction check succeeded.
Running transaction test
The downloaded packages were saved in cache until the next successful transaction.
You can remove cached packages by executing '\''dnf clean packages'\''.
Error: Transaction test error:
  package dos2unix-7.4.3-1.oe2303.riscv64 is already installed'
+ '[' -z '' ']'
+ tmpfile='Last metadata expiration check: 1:09:48 ago on Thu 27 Jul 2023 04:37:11 PM CST.
Dependencies resolved.
================================================================================
 Package          Architecture    Version                Repository        Size
================================================================================
Installing:
 dos2unix         riscv64         7.4.3-1.oe2303         mainline         208 k

Transaction Summary
================================================================================
Install  1 Package

Total size: 208 k
Installed size: 572 k
Downloading Packages:
[SKIPPED] dos2unix-7.4.3-1.oe2303.riscv64.rpm: Already downloaded              
Running transaction check
Waiting for process with pid 1178 to finish.
Transaction check succeeded.
Running transaction test
The downloaded packages were saved in cache until the next successful transaction.
You can remove cached packages by executing '\''dnf clean packages'\''.
Error: Transaction test error:
  package dos2unix-7.4.3-1.oe2303.riscv64 is already installed'
+ TESTFILE=/tmp/testfile
+ echo test
+ LOG_INFO 'Finish preparing the test environment.'
+ message='Finish preparing the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Finish preparing the test environment.'
+ tmpfile2=/tmp/tmpbwiga4tc
+ '[' -z '' ']'
+ tmpfile=/tmp/tmpbwiga4tc
+ TESTFILE=/tmp/testfile
+ echo test
+ LOG_INFO 'Finish preparing the test environment.'
+ message='Finish preparing the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Finish preparing the test environment.'
Thu Jul 27 17:47:08 2023 - INFO  - Finish preparing the test environment.
++ type -t run_test
+ '[' -n function ']'
+ run_test
+ LOG_INFO 'Start to run test.'
+ message='Start to run test.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to run test.'
Thu Jul 27 17:47:08 2023 - INFO  - Finish preparing the test environment.
++ type -t run_test
+ '[' -n function ']'
+ run_test
+ LOG_INFO 'Start to run test.'
+ message='Start to run test.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to run test.'
Thu Jul 27 17:47:10 2023 - INFO  - Start to run test.
++ od -c /tmp/testfile
++ sed -n 1p
+ [[ 0000000   t   e   s   t  \n == \0\0\0\0\0\0\0\ \ \ \t\ \ \ \e\ \ \ \s\ \ \ \t\ \ \\\n ]]
+ CHECK_RESULT 0 0 0 'The original file format is not unix'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='The original file format is not unix'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ LOG_INFO 'test cmd unix2dos...'
+ message='test cmd unix2dos...'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'test cmd unix2dos...'
Thu Jul 27 17:47:10 2023 - INFO  - Start to run test.
++ od -c /tmp/testfile
++ sed -n 1p
+ [[ 0000000   t   e   s   t  \n == \0\0\0\0\0\0\0\ \ \ \t\ \ \ \e\ \ \ \s\ \ \ \t\ \ \\\n ]]
+ CHECK_RESULT 0 0 0 'The original file format is not unix'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='The original file format is not unix'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ LOG_INFO 'test cmd unix2dos...'
+ message='test cmd unix2dos...'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'test cmd unix2dos...'
Thu Jul 27 17:47:11 2023 - INFO  - test cmd unix2dos...
+ unix2dos /tmp/testfile
unix2dos: converting file /tmp/testfile to DOS format...
+ CHECK_RESULT 0 0 0 'unix2dos cmd exec failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='unix2dos cmd exec failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
++ od -c /tmp/testfile
++ sed -n 1p
Thu Jul 27 17:47:11 2023 - INFO  - test cmd unix2dos...
+ [[ 0000000   t   e   s   t  \r  \n == \0\0\0\0\0\0\0\ \ \ \t\ \ \ \e\ \ \ \s\ \ \ \t\ \ \\\r\ \ \\\n ]]
+ CHECK_RESULT 0 0 0 'unix2dos result error, please check...'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='unix2dos result error, please check...'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ LOG_INFO 'test cmd dos2unix...'
+ message='test cmd dos2unix...'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'test cmd dos2unix...'
+ unix2dos /tmp/testfile
unix2dos: converting file /tmp/testfile to DOS format...
+ CHECK_RESULT 0 0 0 'unix2dos cmd exec failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='unix2dos cmd exec failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
++ od -c /tmp/testfile
++ sed -n 1p
+ [[ 0000000   t   e   s   t  \r  \n == \0\0\0\0\0\0\0\ \ \ \t\ \ \ \e\ \ \ \s\ \ \ \t\ \ \\\r\ \ \\\n ]]
+ CHECK_RESULT 0 0 0 'unix2dos result error, please check...'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='unix2dos result error, please check...'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ LOG_INFO 'test cmd dos2unix...'
+ message='test cmd dos2unix...'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'test cmd dos2unix...'
Thu Jul 27 17:47:13 2023 - INFO  - test cmd dos2unix...
+ dos2unix /tmp/testfile
dos2unix: converting file /tmp/testfile to Unix format...
+ CHECK_RESULT 0 0 0 'dos2unix cmd exec failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='dos2unix cmd exec failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
++ od -c /tmp/testfile
++ sed -n 1p
+ [[ 0000000   t   e   s   t  \n == \0\0\0\0\0\0\0\ \ \ \t\ \ \ \e\ \ \ \s\ \ \ \t\ \ \\\n ]]
+ CHECK_RESULT 0 0 0 'dos2unix result error, please check...'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='dos2unix result error, please check...'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ LOG_INFO 'test cmd unix2mac...'
+ message='test cmd unix2mac...'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'test cmd unix2mac...'
Thu Jul 27 17:47:13 2023 - INFO  - test cmd dos2unix...
+ dos2unix /tmp/testfile
dos2unix: converting file /tmp/testfile to Unix format...
+ CHECK_RESULT 0 0 0 'dos2unix cmd exec failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='dos2unix cmd exec failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
++ od -c /tmp/testfile
++ sed -n 1p
+ [[ 0000000   t   e   s   t  \n == \0\0\0\0\0\0\0\ \ \ \t\ \ \ \e\ \ \ \s\ \ \ \t\ \ \\\n ]]
+ CHECK_RESULT 0 0 0 'dos2unix result error, please check...'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='dos2unix result error, please check...'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ LOG_INFO 'test cmd unix2mac...'
+ message='test cmd unix2mac...'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'test cmd unix2mac...'
Thu Jul 27 17:47:14 2023 - INFO  - test cmd unix2mac...
+ unix2mac /tmp/testfile
unix2mac: converting file /tmp/testfile to Mac format...
+ CHECK_RESULT 0 0 0 'unix2mac cmd exec failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='unix2mac cmd exec failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
++ od -c /tmp/testfile
++ sed -n 1p
+ [[ 0000000   t   e   s   t  \r == \0\0\0\0\0\0\0\ \ \ \t\ \ \ \e\ \ \ \s\ \ \ \t\ \ \\\r ]]
+ CHECK_RESULT 0 0 0 'unix2mac result error, please check...'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='unix2mac result error, please check...'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ LOG_INFO 'test cmd mac2unix...'
+ message='test cmd mac2unix...'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'test cmd mac2unix...'
Thu Jul 27 17:47:14 2023 - INFO  - test cmd unix2mac...
+ unix2mac /tmp/testfile
unix2mac: converting file /tmp/testfile to Mac format...
+ CHECK_RESULT 0 0 0 'unix2mac cmd exec failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='unix2mac cmd exec failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
++ od -c /tmp/testfile
++ sed -n 1p
+ [[ 0000000   t   e   s   t  \r == \0\0\0\0\0\0\0\ \ \ \t\ \ \ \e\ \ \ \s\ \ \ \t\ \ \\\r ]]
+ CHECK_RESULT 0 0 0 'unix2mac result error, please check...'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='unix2mac result error, please check...'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ LOG_INFO 'test cmd mac2unix...'
+ message='test cmd mac2unix...'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'test cmd mac2unix...'
Thu Jul 27 17:47:16 2023 - INFO  - test cmd mac2unix...
+ mac2unix /tmp/testfile
mac2unix: converting file /tmp/testfile to Unix format...
+ CHECK_RESULT 0 0 0 'mac2unix cmd exec failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='mac2unix cmd exec failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
Thu Jul 27 17:47:16 2023 - INFO  - test cmd mac2unix...
++ od -c /tmp/testfile
++ sed -n 1p
+ mac2unix /tmp/testfile
+ [[ 0000000   t   e   s   t  \n == \0\0\0\0\0\0\0\ \ \ \t\ \ \ \e\ \ \ \s\ \ \ \t\ \ \\\n ]]
+ CHECK_RESULT 0 0 0 'mac2unix result error, please check...'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='mac2unix result error, please check...'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ LOG_INFO 'End of the test.'
+ message='End of the test.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End of the test.'
mac2unix: converting file /tmp/testfile to Unix format...
+ CHECK_RESULT 0 0 0 'mac2unix cmd exec failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='mac2unix cmd exec failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
++ od -c /tmp/testfile
++ sed -n 1p
+ [[ 0000000   t   e   s   t  \n == \0\0\0\0\0\0\0\ \ \ \t\ \ \ \e\ \ \ \s\ \ \ \t\ \ \\\n ]]
+ CHECK_RESULT 0 0 0 'mac2unix result error, please check...'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='mac2unix result error, please check...'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ LOG_INFO 'End of the test.'
+ message='End of the test.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End of the test.'
Thu Jul 27 17:47:18 2023 - INFO  - End of the test.
+ CASE_RESULT 0
+ case_re=0
+ test -z ''
+ test 0 -eq 0
+ LOG_INFO 'succeed to execute the case.'
+ message='succeed to execute the case.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'succeed to execute the case.'
Thu Jul 27 17:47:18 2023 - INFO  - End of the test.
+ CASE_RESULT 0
+ case_re=0
+ test -z ''
+ test 0 -eq 0
+ LOG_INFO 'succeed to execute the case.'
+ message='succeed to execute the case.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'succeed to execute the case.'
Thu Jul 27 17:47:19 2023 - INFO  - succeed to execute the case.
+ exec_result=
+ exit 0
+ post_test
+ LOG_INFO 'Start to restore the test environment.'
+ message='Start to restore the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to restore the test environment.'
Thu Jul 27 17:47:19 2023 - INFO  - succeed to execute the case.
+ exec_result=
+ exit 0
+ post_test
+ LOG_INFO 'Start to restore the test environment.'
+ message='Start to restore the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to restore the test environment.'
Thu Jul 27 17:47:21 2023 - INFO  - Start to restore the test environment.
+ DNF_REMOVE
+ node=1
+ pkg_list=
+ mode=0
+ [[ -z Last metadata expiration check: 1:09:48 ago on Thu 27 Jul 2023 04:37:11 PM CST.
Dependencies resolved.
================================================================================
 Package          Architecture    Version                Repository        Size
================================================================================
Installing:
 dos2unix         riscv64         7.4.3-1.oe2303         mainline         208 k

Transaction Summary
================================================================================
Install  1 Package

Total size: 208 k
Installed size: 572 k
Downloading Packages:
[SKIPPED] dos2unix-7.4.3-1.oe2303.riscv64.rpm: Already downloaded              
Running transaction check
Waiting for process with pid 1178 to finish.
Transaction check succeeded.
Running transaction test
The downloaded packages were saved in cache until the next successful transaction.
You can remove cached packages by executing 'dnf clean packages'.
Error: Transaction test error:
  package dos2unix-7.4.3-1.oe2303.riscv64 is already installed ]]
+ '[' 0 -ne 0 ']'
+ '[' 1 == 0 ']'
+ python3 /root/mugen/libs/locallibs/rpm_manage.py remove --node 1 --pkgs '' --tempfile 'Last metadata expiration check: 1:09:48 ago on Thu 27 Jul 2023 04:37:11 PM CST.
Dependencies resolved.
================================================================================
 Package          Architecture    Version                Repository        Size
================================================================================
Installing:
 dos2unix         riscv64         7.4.3-1.oe2303         mainline         208 k

Transaction Summary
================================================================================
Install  1 Package

Total size: 208 k
Installed size: 572 k
Downloading Packages:
[SKIPPED] dos2unix-7.4.3-1.oe2303.riscv64.rpm: Already downloaded              
Running transaction check
Waiting for process with pid 1178 to finish.
Transaction check succeeded.
Running transaction test
The downloaded packages were saved in cache until the next successful transaction.
You can remove cached packages by executing '\''dnf clean packages'\''.
Error: Transaction test error:
  package dos2unix-7.4.3-1.oe2303.riscv64 is already installed'
Thu Jul 27 17:47:21 2023 - INFO  - Start to restore the test environment.
+ DNF_REMOVE
+ node=1
+ pkg_list=
+ mode=0
+ [[ -z /tmp/tmpbwiga4tc ]]
+ '[' 0 -ne 0 ']'
+ '[' 1 == 0 ']'
+ python3 /root/mugen/libs/locallibs/rpm_manage.py remove --node 1 --pkgs '' --tempfile /tmp/tmpbwiga4tc
Traceback (most recent call last):
  File "/root/mugen/libs/locallibs/rpm_manage.py", line 192, in <module>
    exitcode = rpm_remove(args.node, args.pkgs, args.tempfile)
  File "/root/mugen/libs/locallibs/rpm_manage.py", line 163, in rpm_remove
    with open(tmpfile, "r") as f:
OSError: [Errno 36] File name too long: "Last metadata expiration check: 1:09:48 ago on Thu 27 Jul 2023 04:37:11 PM CST.\nDependencies resolved.\n================================================================================\n Package          Architecture    Version                Repository        Size\n================================================================================\nInstalling:\n dos2unix         riscv64         7.4.3-1.oe2303         mainline         208 k\n\nTransaction Summary\n================================================================================\nInstall  1 Package\n\nTotal size: 208 k\nInstalled size: 572 k\nDownloading Packages:\n[SKIPPED] dos2unix-7.4.3-1.oe2303.riscv64.rpm: Already downloaded              \nRunning transaction check\nWaiting for process with pid 1178 to finish.\nTransaction check succeeded.\nRunning transaction test\nThe downloaded packages were saved in cache until the next successful transaction.\nYou can remove cached packages by executing 'dnf clean packages'.\nError: Transaction test error:\n  package dos2unix-7.4.3-1.oe2303.riscv64 is already installed"
+ '[' 0 -ne 0 ']'
+ rm -f /tmp/testfile
+ LOG_INFO 'Finish restoring the test environment.'
+ message='Finish restoring the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Finish restoring the test environment.'
Thu Jul 27 17:47:28 2023 - INFO  - Finish restoring the test environment.
+ '[' 0 -ne 0 ']'
+ rm -f /tmp/testfile
+ LOG_INFO 'Finish restoring the test environment.'
+ message='Finish restoring the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Finish restoring the test environment.'
Thu Jul 27 17:47:46 2023 - INFO  - Finish restoring the test environment.
